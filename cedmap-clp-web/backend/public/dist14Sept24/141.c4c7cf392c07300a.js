"use strict";(self.webpackChunkargon_dashboard_angular=self.webpackChunkargon_dashboard_angular||[]).push([[141],{9141:(Wt,I,_)=>{_.r(I),_.d(I,{AuditProgramModule:()=>Xt});var c=_(6895),m=_(8869),h=_(3389),t=_(4650),u=_(4006),b=_(4333);function J(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.hij(" ",e.title," "),t.xp6(2),t.hij(" ",e.description," ")}}const F=function(n,s,e){return{id:"question-paginator",itemsPerPage:n,currentPage:s,totalItems:e}};let Y=(()=>{class n{constructor(e){this.api=e,this.listCount=0,this.page=1,this.limit=30,this.is_inactive=!1,this.getList()}ngOnInit(){}getList(){this.api.get("auditCategory",{page:this.page,limit:this.limit,is_inactive:this.is_inactive}).subscribe(i=>{i&&(this.questionList=i.data,this.listCount=i.meta.total,this.newIndex=i.meta.from,console.log(i))})}onSubmit(e){e.form.invalid?alert("Please fill all the necessary details"):this.api.post("auditCategory",e.value).subscribe(i=>{i&&(alert("category list added"),window.location.reload())})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-question-category-list"]],decls:46,vars:10,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","h-100"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"ngSubmit"],["form","ngForm"],[1,"col-lg-6"],[1,"form-group"],["ngModel","","required","","name","title","type","text","placeholder","Question Category",1,"form-control"],["ngModel","","required","","name","description","type","text","placeholder","Description",1,"form-control"],[1,"d-flex","justify-content-end"],["type","submit","name","submit",1,"btn","btn-success","mt-2","justify-content-center"],[1,"mb-2"],[1,"table-responsive"],["previousLabel","Prev","nextLabel","Next","id","question-paginator",3,"responsive","pageChange"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],[4,"ngFor","ngForOf"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",4)(9,"div",5)(10,"h3",8),t._uU(11,"Question Category List"),t.qZA()()()(),t.TgZ(12,"div",9)(13,"form",10,11),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.MAs(14);return t.KtG(i.onSubmit(r))}),t.TgZ(15,"div",4)(16,"div",12)(17,"div",13)(18,"label"),t._uU(19,"Question Category"),t.qZA(),t._UZ(20,"input",14),t.qZA()(),t.TgZ(21,"div",12)(22,"div",13)(23,"label"),t._uU(24,"Description"),t.qZA(),t._UZ(25,"input",15),t.qZA()()(),t.TgZ(26,"div",16)(27,"button",17),t._uU(28," Add "),t.qZA()()(),t._UZ(29,"hr",18),t.TgZ(30,"div",19)(31,"h4"),t._uU(32,"Category List"),t.qZA(),t.TgZ(33,"pagination-controls",20),t.NdJ("pageChange",function(r){return i.page=r,i.getList()}),t.qZA(),t.TgZ(34,"div"),t._uU(35),t.qZA(),t.TgZ(36,"table",21)(37,"thead",22)(38,"tr")(39,"th"),t._uU(40,"Question Category"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Description"),t.qZA()()(),t.TgZ(43,"tbody"),t.YNc(44,J,5,2,"tr",23),t.ALo(45,"paginate"),t.qZA()()()()()()()()}2&e&&(t.xp6(33),t.Q6J("responsive",!0),t.xp6(2),t.hij("Total : ",i.listCount,""),t.xp6(9),t.Q6J("ngForOf",t.xi3(45,3,i.questionList,t.kEZ(6,F,i.limit,i.page,i.listCount))))},dependencies:[c.sg,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.On,u.F,b.LS,b._s]}),n})();var w=_(529),Z=_(5031),y=_(6590);function M(n,s){if(1&n&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.title," ")}}function O(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"h2"),t._uU(7,"Create Question"),t.qZA()(),t.TgZ(8,"div",11)(9,"span",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickBlukUpload())}),t._uU(10,"Bulk Upload "),t.qZA()()()(),t.TgZ(11,"div",13)(12,"form",14,15),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(13),a=t.oxw();return t.KtG(a.onSubmit(o))}),t.TgZ(14,"div",16)(15,"div",17)(16,"div",18)(17,"label"),t._uU(18,"Question Category"),t.qZA(),t.TgZ(19,"select",19)(20,"option",20),t._uU(21," Select Question Category "),t.qZA(),t.YNc(22,M,2,2,"option",21),t.qZA()()(),t.TgZ(23,"div",17)(24,"div",18)(25,"label",22),t._uU(26,"Question for: "),t.qZA(),t.TgZ(27,"select",23)(28,"option",20),t._uU(29," Select Question for "),t.qZA(),t.TgZ(30,"option",24),t._uU(31,"Individual"),t.qZA(),t.TgZ(32,"option",25),t._uU(33,"Assessor"),t.qZA()()()(),t.TgZ(34,"div",26)(35,"h3"),t._uU(36,"Question"),t.qZA(),t._UZ(37,"ckeditor",27),t.qZA(),t.TgZ(38,"div",26)(39,"h3"),t._uU(40,"Risk"),t.qZA(),t._UZ(41,"ckeditor",28),t.qZA(),t.TgZ(42,"div",26)(43,"h3"),t._uU(44,"Suggestion"),t.qZA(),t._UZ(45,"ckeditor",29),t.qZA()(),t.TgZ(46,"div",30)(47,"button",31),t._uU(48," Create "),t.qZA()()()()()()()}if(2&n){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.questionList),t.xp6(15),t.Q6J("config",e.ckeConfig)}}function k(n,s){if(1&n&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.title," ")}}function B(n,s){1&n&&(t.TgZ(0,"button",40),t._uU(1," Upload "),t.qZA())}function H(n,s){1&n&&(t.TgZ(0,"button",41),t._uU(1," Upload "),t.qZA())}function G(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h2"),t._uU(5,"Audit Questions Bulk Upload"),t.qZA()(),t.TgZ(6,"div",13)(7,"form",14,15),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(8),a=t.oxw();return t.KtG(a.onBulkSubmit(o))}),t.TgZ(9,"div",16)(10,"div",17)(11,"div",18)(12,"label"),t._uU(13,"Question Category"),t.qZA(),t.TgZ(14,"select",19)(15,"option",20),t._uU(16," Select Question Category "),t.qZA(),t.YNc(17,k,2,2,"option",21),t.qZA()()(),t.TgZ(18,"div",17)(19,"div",18)(20,"label",22),t._uU(21,"Question for: "),t.qZA(),t.TgZ(22,"select",23)(23,"option",20),t._uU(24," Select Question for "),t.qZA(),t.TgZ(25,"option",24),t._uU(26,"Individual"),t.qZA(),t.TgZ(27,"option",25),t._uU(28,"Assessor"),t.qZA()()()(),t.TgZ(29,"div",17)(30,"div",18)(31,"label",22),t._uU(32,"Upload File: "),t.qZA(),t.TgZ(33,"input",33),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileSelected(o))}),t.qZA()()(),t.TgZ(34,"div",17)(35,"nav",34)(36,"h2"),t._uU(37,"Notes"),t.qZA()(),t.TgZ(38,"div",35)(39,"p")(40,"a",36),t._UZ(41,"i",37),t._uU(42," Click here "),t.qZA(),t._uU(43,"to download sample format for upload."),t.qZA(),t.TgZ(44,"p"),t._uU(45,"Kindly don't change the header of the upload file "),t.qZA()()()(),t.YNc(46,B,2,0,"button",38),t.YNc(47,H,2,0,"button",39),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(17),t.Q6J("ngForOf",e.questionList),t.xp6(29),t.Q6J("ngIf",e.uploadButtonStatus),t.xp6(1),t.Q6J("ngIf",!e.uploadButtonStatus)}}let j=(()=>{class n{constructor(e,i,o){this.api=e,this.router=i,this.fs=o,this.is_inactive=!1,this.isBulkUpload=!1,this.uploadButtonStatus=!1,this.ckeConfig={height:100,extraPlugins:"eqneditor"},this.getList()}ngOnInit(){}onClickBlukUpload(){this.isBulkUpload=!0}getList(){this.api.get("auditCategory",{is_inactive:this.is_inactive}).subscribe(i=>{i&&(this.questionList=i.data,console.log(i))})}onSubmit(e){e.form.invalid?alert("Please fill all the necessary details"):this.api.post("auditQuestion",e.value).subscribe(i=>{i&&(alert("Quesiton Added"),window.location.reload())})}onFileSelected(e){e.target.files.length?"text/csv"==e.target.files[0].type?(this.selectedFile=e.target.files[0],console.log("Image File",this.selectedFile),this.uploadButtonStatus=!0):alert("Please upload file in csv format"):this.selectedFile=null,this.selectedFile?this.fs.uploadFile(this.selectedFile).subscribe(i=>{i.type==w.dt.Response&&(this.questionFile=i.body.file.path)}):alert("Select File to upload")}onBulkSubmit(e){if(e.form.invalid)alert("Please fill all form values");else{const i={quesFile:this.questionFile,...e.form.value};console.log("BLUK Upload>?>?",i),this.api.post("auditQuestion/uploadBulkQuestion",i).subscribe(o=>{o?(alert(o.message),this.router.navigate(["/audit/audit-question-list"])):alert(o.message)})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.F0),t.Y36(Z.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-question-add"]],decls:6,vars:2,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container","mt--7","pb-5"],["class","row justify-content-center",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-lg-12","col-md-8"],[1,"card","bg-secondary","shadow","border-0"],[1,"card-header","bg-transparent"],[1,"row"],[1,"col"],[1,"col","text-right","float-right"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"card-body"],[3,"ngSubmit"],["form","ngForm"],[1,"row","mt-4"],[1,"col-lg-6"],[1,"form-group"],["ngModel","","required","","name","question_category","placeholder","Course Type","aria-label","Default select example",1,"form-control"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","",1,""],["ngModel","","required","","name","questionType","placeholder","","aria-label","Default select example",1,"form-control"],["value","Individual"],["value","Assessor"],[1,"col-lg-12","my-3"],["ngModel","","name","question","skin","moono-lisa","language","en",3,"config"],["ngModel","","name","risk"],["ngModel","","name","suggestion"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-success","mt-3","justify-content-center"],[3,"value"],["type","file",1,"form-control",3,"change"],[1,"nav","navbar-light","pl-3",2,"background-color","#e3f2fd"],[1,"pl-3"],["href","/assets/docs/CYBERLAW.auditquestions.csv","target","_blank"],["aria-hidden","true",1,"fa","fa-download"],["type","submit","class","btn btn-success",4,"ngIf"],["type","submit","disabled","","class","btn btn-success",4,"ngIf"],["type","submit",1,"btn","btn-success"],["type","submit","disabled","",1,"btn","btn-success"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3),t.YNc(4,O,49,2,"div",4),t.YNc(5,G,48,3,"div",4),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",!i.isBulkUpload),t.xp6(1),t.Q6J("ngIf",i.isBulkUpload))},dependencies:[c.sg,c.O5,y.u,u._Y,u.YN,u.Kr,u.EJ,u.JJ,u.JL,u.Q7,u.On,u.F]}),n})();function P(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._UZ(4,"div",20),t.qZA(),t.TgZ(5,"td",17),t._uU(6),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.hij(" ",e.category.title," "),t.xp6(2),t.Q6J("innerHTML",e.question,t.oJD),t.xp6(2),t.hij(" ",e.questionType," ")}}const $=function(){return["/audit/audit-question-add"]},R=function(n,s,e){return{id:"question-paginator",itemsPerPage:n,currentPage:s,totalItems:e}};let K=(()=>{class n{constructor(e){this.api=e,this.listCount=0,this.page=1,this.limit=30,this.is_inactive=!1,this.getList()}ngOnInit(){}getList(){this.api.get("auditQuestion",{page:this.page,limit:this.limit,is_inactive:this.is_inactive}).subscribe(i=>{i&&(this.questionList=i.data,this.listCount=i.meta.total,this.newIndex=i.meta.from,console.log(i))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-question-list"]],decls:32,vars:12,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","h-100"],[1,"card-header"],[1,"card-title","m-0"],[1,"col-2","d-flex"],["routerLinkActive","router-link-active",1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"card-body"],[1,"table-responsive"],[1,"d-flex","justify-content-end"],["previousLabel","Prev","nextLabel","Next","id","question-paginator",3,"responsive","pageChange"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[2,"word-wrap","normal","white-space","normal"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",4)(9,"div",5)(10,"h3",8),t._uU(11,"Question Category List"),t.qZA()(),t.TgZ(12,"div",9)(13,"a",10),t._uU(14,"+ New Question"),t.qZA()()()(),t.TgZ(15,"div",11)(16,"div",12)(17,"div",13),t._uU(18),t.qZA(),t.TgZ(19,"pagination-controls",14),t.NdJ("pageChange",function(a){return i.page=a,i.getList()}),t.qZA(),t.TgZ(20,"table",15)(21,"thead",16)(22,"tr",17)(23,"th"),t._uU(24,"Category"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Question"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Assigned For"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,P,7,3,"tr",18),t.ALo(31,"paginate"),t.qZA()()()()()()()()),2&e&&(t.xp6(13),t.Q6J("routerLink",t.DdM(7,$)),t.xp6(5),t.hij(" Total : ",i.listCount," "),t.xp6(1),t.Q6J("responsive",!0),t.xp6(11),t.Q6J("ngForOf",t.xi3(31,4,i.questionList,t.kEZ(8,R,i.limit,i.page,i.listCount))))},dependencies:[c.sg,m.yS,m.Od,b.LS,b._s]}),n})();function X(n,s){if(1&n&&(t.TgZ(0,"option",21),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.title," ")}}function V(n,s){if(1&n&&t._UZ(0,"option",22),2&n){const e=s.$implicit;t.s9C("title",e.question),t.Q6J("value",e._id)("innerHtml",e.question,t.oJD)}}function z(n,s){if(1&n&&(t.TgZ(0,"div",23)(1,"div",24)(2,"div",9)(3,"span"),t._uU(4," Selected Question:"),t.qZA(),t._UZ(5,"br"),t._uU(6),t.qZA()(),t.TgZ(7,"div",25)(8,"label",26),t._uU(9,"Doubt/Query"),t.qZA(),t.TgZ(10,"textarea",27),t._uU(11,"                  "),t.qZA()(),t.TgZ(12,"div",28)(13,"button",29),t._uU(14," Send "),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",e.selectedQuestion," ")}}function W(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7),t._UZ(3,"div",8),t.TgZ(4,"div",9)(5,"form",10,11),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(6),a=t.oxw();return t.KtG(a.onSubmit(o))}),t.TgZ(7,"h2"),t._uU(8,"Doubt/Query Question"),t.qZA(),t.TgZ(9,"div",12)(10,"div",13)(11,"div",14)(12,"label"),t._uU(13,"Question Category"),t.qZA(),t.TgZ(14,"select",15),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.getQuestion(o))}),t.TgZ(15,"option",16),t._uU(16," Select Question Category "),t.qZA(),t.YNc(17,X,2,2,"option",17),t.qZA()()(),t.TgZ(18,"div",13)(19,"div",14)(20,"label"),t._uU(21,"Question "),t.qZA(),t.TgZ(22,"select",18),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.getSelectedQuestionValue(o))}),t.TgZ(23,"option",16),t._uU(24," Select Question "),t.qZA(),t.YNc(25,V,1,3,"option",19),t.qZA()()(),t.YNc(26,z,15,1,"div",20),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(17),t.Q6J("ngForOf",e.question_category),t.xp6(8),t.Q6J("ngForOf",e.questions),t.xp6(1),t.Q6J("ngIf",e.selectedQuestion)}}let Q=(()=>{class n{constructor(e,i,o){this.api=e,this.router=i,this.route=o,this.is_inactive=!1,this.userView=!0,this.route.params.subscribe(a=>{this.query_id=a.id,this.query_id?(console.log(this.query_id),this.getQueryId(),this.userView=!1):this.getQuestionCategory()})}ngOnInit(){}getQueryId(){this.api.getById("auditQuestionQuery",this.query_id).subscribe(e=>{e&&(this.queryData=e,console.log(">>>>>>>",this.queryData))})}getQuestionCategory(){this.api.get("auditCategory",{is_inactive:this.is_inactive,limit:1e3}).subscribe(i=>{i&&(this.question_category=i.data)})}getQuestion(e){console.log("e.target.value",e.target.value),this.api.get("auditQuestion",{question_category:e.target.value}).subscribe(o=>{o&&(this.questions=o.data,console.log(">>>>>>>>>>",this.questions))})}getSelectedQuestionValue(e){const i=e.target;this.selectedQuestion=i.options[i.selectedIndex].textContent.trim(),console.log("Selected Question:",this.selectedQuestion)}onSubmit(e){e.form.invalid?alert("Please write your Question"):this.api.post("auditQuestionQuery",e.value).subscribe(i=>{i&&(alert("Your Query has been submitted successfully"),this.router.navigate(["/audit/audit-query-list"]))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.F0),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-questionnare"]],decls:5,vars:1,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container","mt--7","pb-5"],["class","row justify-content-center",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-lg-12","col-md-8"],[1,"card","bg-secondary","shadow","border-0"],[1,"card-header","bg-transparent"],[1,"card-body"],[3,"ngSubmit"],["form","ngForm"],[1,"row","mt-4"],[1,"col-lg-6"],[1,"form-group"],["ngModel","","required","","name","question_category","placeholder","Course Type","aria-label","Default select example",1,"form-control",3,"change"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["ngModel","","required","","name","question_id","placeholder","Course Type","aria-label","Default select example",1,"form-control",3,"change"],[3,"value","innerHtml","title",4,"ngFor","ngForOf"],["class","container",4,"ngIf"],[3,"value"],[3,"value","innerHtml","title"],[1,"container"],[1,"card","my-4"],[1,"col-lg-12"],["for",""],["rows","5","ngModel","","name","applicant_query","id","",1,"form-control"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-success","mt-3","justify-content-center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3),t.YNc(4,W,27,3,"div",4),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",i.userView))},dependencies:[c.sg,c.O5,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.Q7,u.On,u.F]}),n})();const tt=function(){return["/audit/audit-questionnare"]};function et(n,s){1&n&&(t.TgZ(0,"div",18)(1,"a",19),t._uU(2,"+ New Query/Doubt"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,tt)))}function it(n,s){1&n&&(t.TgZ(0,"span",26),t._uU(1,"View Reply"),t._UZ(2,"br"),t.qZA())}function nt(n,s){1&n&&(t.TgZ(0,"span",27),t._uU(1,"Not Reply Yet"),t._UZ(2,"br"),t.qZA())}function ot(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td",16),t._uU(2),t.qZA(),t.TgZ(3,"td",20),t._UZ(4,"div",21),t.qZA(),t.TgZ(5,"td",16)(6,"a",22),t.YNc(7,it,3,0,"span",23),t.YNc(8,nt,3,0,"span",24),t._UZ(9,"i",25),t.qZA()()()),2&n){const e=s.$implicit;t.xp6(2),t.hij(" ",e.category.title," "),t.xp6(2),t.Q6J("innerHTML",e.question.question,t.oJD),t.xp6(2),t.MGl("routerLink","/audit/audit-query-view/",e._id,""),t.xp6(1),t.Q6J("ngIf",e.reply),t.xp6(1),t.Q6J("ngIf",!e.reply)}}const st=function(n,s,e){return{id:"question-paginator",itemsPerPage:n,currentPage:s,totalItems:e}};let E=(()=>{class n{constructor(e,i,o){this.api=e,this.router=i,this.route=o,this.listCount=0,this.page=1,this.limit=30,this.is_inactive=!1,this.user=JSON.parse(localStorage.getItem("user")),this.route.params.subscribe(a=>{this.user_id=a.id,this.user_id?(this.created_by=this.user_id,this.getList()):(this.created_by=this.user.id,this.getList())})}ngOnInit(){}getList(){this.api.get("auditQuestionQuery",{created_by:this.created_by,page:this.page,limit:this.limit,is_inactive:this.is_inactive}).subscribe(i=>{i&&(this.questionList=i.data,this.listCount=i.meta.total,this.newIndex=i.meta.from,console.log(i))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.F0),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-questionnare-list"]],decls:30,vars:11,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","h-100"],[1,"card-header"],[1,"card-title","m-0"],["class","col-2 d-flex",4,"ngIf"],[1,"card-body"],[1,"table-responsive"],[1,"d-flex","justify-content-end"],["previousLabel","Prev","nextLabel","Next","id","question-paginator",3,"responsive","pageChange"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"col-2","d-flex"],["routerLinkActive","router-link-active",1,"btn","btn-success","btn-sm",3,"routerLink"],[2,"word-wrap","normal","white-space","normal"],[3,"innerHTML"],[3,"routerLink"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],["aria-hidden","true",1,"fa","fa-eye"],[1,"text-success"],[1,"text-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",4)(9,"div",5)(10,"h3",8),t._uU(11,"Audit Doubt/Query List"),t.qZA()(),t.YNc(12,et,3,2,"div",9),t.qZA()(),t.TgZ(13,"div",10)(14,"div",11)(15,"div",12),t._uU(16),t.qZA(),t.TgZ(17,"pagination-controls",13),t.NdJ("pageChange",function(a){return i.page=a,i.getList()}),t.qZA(),t.TgZ(18,"table",14)(19,"thead",15)(20,"tr",16)(21,"th"),t._uU(22,"Category"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Question"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"View Reply/Answer"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,ot,10,5,"tr",17),t.ALo(29,"paginate"),t.qZA()()()()()()()()),2&e&&(t.xp6(12),t.Q6J("ngIf","admin"!=i.user.role),t.xp6(4),t.hij(" Total : ",i.listCount," "),t.xp6(1),t.Q6J("responsive",!0),t.xp6(11),t.Q6J("ngForOf",t.xi3(29,4,i.questionList,t.kEZ(7,st,i.limit,i.page,i.listCount))))},dependencies:[c.sg,c.O5,m.yS,m.Od,b.LS,b._s]}),n})();var A=_(2340);function at(n,s){if(1&n&&(t.TgZ(0,"p")(1,"a",15),t._uU(2,"View Attachment"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.hYB("href","",e.env.url,"/file/download/",e.queryData.reply_docs,"",t.LSH)}}function rt(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"div",9)(2,"h3"),t._uU(3,"Reply:"),t.qZA(),t.TgZ(4,"div",9),t._UZ(5,"p",11),t.qZA(),t.TgZ(6,"div",9),t.YNc(7,at,3,2,"p",14),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("innerHTML",e.queryData.reply,t.oJD),t.xp6(2),t.Q6J("ngIf",e.queryData.reply_docs)}}function ut(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"form",16,17),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.MAs(2),a=t.oxw();return t.KtG(a.onSubmit(o))}),t.TgZ(3,"div",9)(4,"div",18)(5,"h4"),t._uU(6,"Reply:"),t.qZA(),t._UZ(7,"ckeditor",19),t.qZA(),t.TgZ(8,"div",20)(9,"h3"),t._uU(10,"Attach File "),t.qZA(),t.TgZ(11,"input",21),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.uploadpdf(o))}),t.qZA(),t.TgZ(12,"small",22),t._uU(13,"Upload File"),t.qZA()(),t.TgZ(14,"button",23),t._uU(15," Save "),t.qZA()()()()}}let dt=(()=>{class n{constructor(e,i,o,a){this.api=e,this.router=i,this.fs=o,this.route=a,this.is_inactive=!1,this.userView=!0,this.env=A.N,this.user=JSON.parse(localStorage.getItem("user")),this.route.params.subscribe(r=>{this.query_id=r.id,this.api.getById("auditQuestionQuery",this.query_id).subscribe(l=>{console.log("respp>>>>>>>",l),this.queryData=l.result})})}ngOnInit(){}uploadpdf(e){e.target.files.length?(this.pdfFile=e.target.files[0],this.pdf()):this.pdfFile=null}pdf(){this.pdfFile?this.fs.uploadFile(this.pdfFile).subscribe(e=>{e.type==w.dt.Response&&(this.file_link=e.body.file.path)}):alert("Select pdf")}onSubmit(e){if(e.form.valid){console.log("FormUPDATE",e.value);const i={...e.value,reply_docs:this.file_link};console.log("FORM DFATA TO UPDATE",i),this.api.put("auditQuestionQuery",this.query_id,i).subscribe(o=>{o&&(alert("Response sent successfully"),window.location.reload())})}else alert("Fill all Required value")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.F0),t.Y36(Z.I),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-questionnare-list-view"]],decls:28,vars:5,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","h-100"],[1,"card-header"],[1,"card-title","m-0"],[1,"card-body"],[1,"card"],[3,"innerHTML"],[1,"card","my-2"],["class","card my-2",4,"ngIf"],[4,"ngIf"],["target","_blank",1,"btn","btn-sm","btn-primary",3,"href"],[3,"ngSubmit"],["form","ngForm"],[1,"my-4"],["ngModel","","name","reply","required",""],[1,"form-group","align-items-center","my-4"],["ngModel","","name","reply_docs","type","file","placeholder","Upload PDF File ",1,"form-control",3,"change"],["id","Pdf_link_code",1,"form-text","text-muted"],["type","submit",1,"btn","btn-success"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",4)(9,"div",5)(10,"h3",8),t._uU(11,"Doubt/Query View"),t.qZA()()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",9)(15,"h3"),t._uU(16),t.qZA(),t.TgZ(17,"div",9),t._UZ(18,"p",11),t.qZA()()(),t.TgZ(19,"div",12)(20,"div",9)(21,"h3"),t._uU(22,"Doubt/Query:"),t.qZA(),t.TgZ(23,"div",9)(24,"p"),t._uU(25),t.qZA()()()(),t.YNc(26,rt,8,2,"div",13),t.YNc(27,ut,16,0,"div",13),t.qZA()()()()()),2&e&&(t.xp6(16),t.Oqu(i.queryData.category.title),t.xp6(2),t.Q6J("innerHTML",null==i.queryData||null==i.queryData.ques?null:i.queryData.ques.question,t.oJD),t.xp6(7),t.Oqu(null==i.queryData?null:i.queryData.applicant_query),t.xp6(1),t.Q6J("ngIf",i.queryData.reply),t.xp6(1),t.Q6J("ngIf",!i.queryData.reply&&"admin"==i.user.role))},dependencies:[c.O5,y.u,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.On,u.F]}),n})();function lt(n,s){if(1&n&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.course_name),t.xp6(1),t.hij(" ",e.course_name," ")}}function ct(n,s){if(1&n&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e._id),t.xp6(1),t.hij(" ",e.batch_name," ")}}let mt=(()=>{class n{constructor(e,i){this.api=e,this.router=i,this.batch_id=[],this.duration="--",this.isAuditExam=!0}ngOnInit(){}getCourseList(e){switch(this.course_type=e.target.value,this.course_type){case"Training program for Govt Organisation":case"Special Training Program":case"Internship Program":this.duration="90";break;case"Regular Course":case"E-Learning Course":this.duration="60";break;default:this.duration="0"}this.api.get("course",{course_type:this.course_type}).subscribe(i=>{console.log(i),this.courseList=i.data})}getBatch(e){this.course_name=e.target.value,this.api.get("batch",{isAuditExam:this.isAuditExam,course_type:this.course_type,course_name:this.course_name,order_by:"created_at",order_in:"desc"}).subscribe(o=>{this.batchList=o.data,console.log(this.batchList)})}checkDate(e,i){if("from"===i)return e+"T00:00:00.000Z";if("to"===i)return e+"T23:59:59.000Z";const o=new Date(e);console.log("selectedDate >>>>>",o)}submit(e){e.form.invalid?alert("Please fill all form values"):(new Date(e.form.value.exam_date),new Date,console.log(e.form.value),this.api.post("auditExam",e.form.value).subscribe(a=>{a?(alert(a.message),this.router.navigate(["/audit/exam-list"])):alert(a.message)}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-exam-schedule"]],decls:70,vars:2,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container","mt--7","pb-5"],[1,"row","justify-content-center"],[1,"col-lg-12","col-md-8"],[1,"card","bg-secondary","shadow","border-0"],[1,"card-header","bg-transparent"],[1,"card-body"],[1,"p-3","mt-3",3,"ngSubmit"],["infoForm","ngForm"],[1,"row","mt-2"],[1,"col-lg-6"],["for","input-country",1,""],["ngModel","","name","exam_name","type","text","placeholder","Assessment Name","required","",1,"form-control"],[1,"form-group","align-items-center"],["ngModel","","name","exam_code","type","text","placeholder","Assessment Code","required","",1,"form-control"],[1,"row","mt-4"],[1,"form-group"],[1,""],["required","","ngModel","","name","course_type","placeholder","Course Type","aria-label","Default select example","required","",1,"form-select","form-control",3,"change"],["value","","disabled","","selected","","hidden",""],["value","Training program for Govt Organisation"],[1,"col-6"],["required","","ngModel","","name","course_name","placeholder","Course Name","aria-label","Default select example",1,"form-select","form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","",1,"form-label"],["required","","ngModel","","multiple","","name","batch_id","placeholder","","aria-label","Default select example",1,"form-select","form-control"],["required","","ngModel","","name","exam_date_from","type","datetime-local","placeholder","Exam Date",1,"form-control",3,"change"],["required","","ngModel","","name","exam_date_to","type","datetime-local","placeholder","Exam Date",1,"form-control",3,"change"],["id","duration","ngModel","","name","exam_duration","placeholder","Duration",1,"form-control"],[1,"row","container","mt-4"],["type","submit",1,"btn","btn-primary"],[3,"value"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h2"),t._uU(9,"Internal Security Assessment"),t.qZA()(),t.TgZ(10,"div",8)(11,"form",9,10),t.NdJ("ngSubmit",function(){t.CHM(o);const r=t.MAs(12);return t.KtG(i.submit(r))}),t.TgZ(13,"div",11)(14,"div",12)(15,"label",13),t._uU(16,"Assessment Name"),t.qZA(),t._UZ(17,"input",14),t.qZA(),t.TgZ(18,"div",12)(19,"div",15)(20,"label",13),t._uU(21,"Assessment Code"),t.qZA(),t._UZ(22,"input",16),t.qZA()()(),t.TgZ(23,"div",17)(24,"div",12)(25,"div",18)(26,"label",13),t._uU(27,"Course Type"),t.qZA(),t.TgZ(28,"div",19)(29,"select",20),t.NdJ("change",function(r){return i.getCourseList(r)}),t.TgZ(30,"option",21),t._uU(31," Select Course Type "),t.qZA(),t.TgZ(32,"option",22),t._uU(33," Training program for Govt Organisation "),t.qZA()()()()(),t.TgZ(34,"div",23)(35,"label",13),t._uU(36,"Course Name"),t.qZA(),t.TgZ(37,"div",19)(38,"select",24),t.NdJ("change",function(r){return i.getBatch(r)}),t.TgZ(39,"option",21),t._uU(40," Select Course name "),t.qZA(),t.YNc(41,lt,2,2,"option",25),t.qZA()()()(),t.TgZ(42,"div",17)(43,"div",12)(44,"div",15)(45,"label",26),t._uU(46,"Batch Name: "),t.qZA(),t.TgZ(47,"div",19)(48,"select",27)(49,"option",21),t._uU(50," Select Batch Name "),t.qZA(),t.YNc(51,ct,2,2,"option",25),t.qZA()(),t._UZ(52,"br"),t.qZA()()(),t.TgZ(53,"div",11)(54,"div",12)(55,"label",26),t._uU(56,"Exam Date From:"),t.qZA(),t.TgZ(57,"input",28),t.NdJ("change",function(){t.CHM(o);const r=t.MAs(12);return t.KtG(i.checkDate(r.form.value.exam_date_from,"from"))}),t.qZA()(),t.TgZ(58,"div",12)(59,"label",26),t._uU(60,"Exam Date To:"),t.qZA(),t.TgZ(61,"input",29),t.NdJ("change",function(){t.CHM(o);const r=t.MAs(12);return t.KtG(i.checkDate(r.form.value.exam_date_to,"to"))}),t.qZA()()(),t.TgZ(62,"div",17)(63,"div",12)(64,"label",26),t._uU(65," Exam Duration (in minutes): "),t.qZA(),t._UZ(66,"input",30),t.qZA()(),t.TgZ(67,"div",31)(68,"button",32),t._uU(69,"Schedule Exam"),t.qZA()()()()()()()()}2&e&&(t.xp6(41),t.Q6J("ngForOf",i.courseList),t.xp6(10),t.Q6J("ngForOf",i.batchList))},dependencies:[c.sg,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.K7,u.JJ,u.JL,u.Q7,u.On,u.F]}),n})();var U=_(3097);function gt(n,s){if(1&n&&(t.TgZ(0,"div")(1,"span",26),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.batch_name," ")}}function pt(n,s){if(1&n&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.exam_status)}}function _t(n,s){if(1&n&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.exam_status)}}function ht(n,s){if(1&n&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.exam_status)}}function ft(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t.YNc(8,gt,3,1,"div",17),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td"),t.YNc(16,pt,2,1,"span",18),t.YNc(17,_t,2,1,"span",19),t.YNc(18,ht,2,1,"span",20),t.qZA(),t.TgZ(19,"td")(20,"div",21)(21,"a",22),t._UZ(22,"i",23),t.qZA(),t.TgZ(23,"div",24)(24,"a",25),t._uU(25," Show Results"),t.qZA()()()()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.exam_name),t.xp6(2),t.Oqu(e.exam_code),t.xp6(2),t.Oqu(e.course_type),t.xp6(2),t.Q6J("ngIf",null==e?null:e.batch_name),t.xp6(2),t.Oqu(t.xi3(11,11,e.exam_date_from,"dd-MM-YYYY")),t.xp6(3),t.Oqu(t.xi3(14,14,e.exam_date_to,"dd-MM-YYYY")),t.xp6(3),t.Q6J("ngIf","Upcoming"==e.exam_status),t.xp6(1),t.Q6J("ngIf","Exam Over"==e.exam_status),t.xp6(1),t.Q6J("ngIf","Ongoing"==e.exam_status),t.xp6(6),t.hYB("routerLink","/audit/student-list/",e.batch_id[0],"/",e._id,"")}}const xt=function(){return["/audit/exam-schedule"]};let bt=(()=>{class n{constructor(e){this.api=e,this.batchNames=[]}ngOnInit(){this.getExamsList()}getExamsList(){this.api.get("auditExam/getList",{}).subscribe(e=>{this.examList=e.data,console.log(e.data),this.updatedExamList=this.examList.map(i=>{let o=new Date(i.exam_date_from),l=(i.exam_time?.split(":"),i.exam_time?.split(":"),o.getDate()),d=o.getMonth(),p=o.getFullYear(),g=new Date,C=g.getDate(),f=g.getMonth(),v=g.getFullYear(),S=(g.getHours(),g.getMinutes(),this.timeDifference(g,o)),D=new Date(i.exam_date_to).setHours(23,59,59),q=this.timeDifference(new Date(g),new Date(D));return console.log("Today Time>>>>>",new Date(g)),console.log("examEndTime Time>>>>>",new Date(D)),this.timeDiff=q,console.log("<<*******EXAM START*********>>",i.exam_name,S),console.log("<<#######EXAM END#######>>",i.exam_name,q),l&&C&&d&&f&&p&&v&&(S>0&&q>0?i.exam_status="Upcoming":S<=0&&q>=0?i.exam_status="Ongoing":q<0&&S<0&&(i.exam_status="Exam Over")),this.api.getById("batch",i.batch_id[0]).subscribe(zt=>{i.batch_name=zt.batch_name}),i})})}getExamSubmittedStatus(){}getBatchNames(e){for(let i of e)this.api.getById("batch",i).subscribe(o=>{this.batchNames.push(o.batch_name)});console.log(this.batchNames)}timeDifference(e,i){let o=e.getTime(),a=i.getTime();return console.log("higherValue",a),console.log("lowerValue",o),a-o}timeInSeconds(e){return e.getTime()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-exam-list"]],decls:37,vars:3,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title","col"],[1,"col-2"],[1,"d-flex"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"table-responsive",2,"min-height","50vh"],[1,"table","align-items-center","table-flush","text-center",2,"min-height","100px"],[1,"thead-light"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-danger",4,"ngIf"],["class","badge badge-pill badge-primary",4,"ngIf"],["ngbDropdown","","placement","bottom-right"],["ngbDropdownToggle","",1,"btn","btn-sm","btn-icon-only","text-light"],[1,"fas","fa-ellipsis-v"],["ngbDropdownMenu","",1,"dropdown-menu-right","dropdown-menu-arrow"],[1,"dropdown-item",3,"routerLink"],[1,"badge","badge-pill","ml-2","badge-primary","border","border-primary"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-danger"],[1,"badge","badge-pill","badge-primary"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",4)(9,"h4",8),t._uU(10,"Internal Security Assessment List "),t.qZA(),t.TgZ(11,"div",9)(12,"span",10)(13,"a",11),t._uU(14,"+ Schedule"),t.qZA()()()(),t.TgZ(15,"div",12)(16,"table",13)(17,"thead",14)(18,"tr")(19,"th",15),t._uU(20,"Exam Name"),t.qZA(),t.TgZ(21,"th",15),t._uU(22,"Exam Code"),t.qZA(),t.TgZ(23,"th",15),t._uU(24,"Course Type"),t.qZA(),t.TgZ(25,"th",15),t._uU(26,"Batch Name"),t.qZA(),t.TgZ(27,"th",15),t._uU(28,"Exam Date From"),t.qZA(),t.TgZ(29,"th",15),t._uU(30,"Exam Date To"),t.qZA(),t.TgZ(31,"th",15),t._uU(32,"Exam Status"),t.qZA(),t.TgZ(33,"th",15),t._uU(34,"Actions"),t.qZA()()(),t.TgZ(35,"tbody"),t.YNc(36,ft,26,17,"tr",16),t.qZA()()()()()()()()),2&e&&(t.xp6(13),t.Q6J("routerLink",t.DdM(2,xt)),t.xp6(23),t.Q6J("ngForOf",i.updatedExamList))},dependencies:[c.sg,c.O5,m.yS,U.jt,U.iD,U.Vi,c.uU]}),n})();function vt(n,s){if(1&n&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.exam_status)}}function Zt(n,s){if(1&n&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.exam_status)}}function At(n,s){if(1&n&&(t.TgZ(0,"span",22),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.exam_status)}}function Tt(n,s){if(1&n&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.exam_status)}}function qt(n,s){if(1&n&&(t.TgZ(0,"a",24),t._UZ(1,"i",25),t._uU(2," Assessment Report "),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.hYB("href","",i.env.url,"/file/download/",null==e?null:e.report,"",t.LSH)}}function yt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw();return t.KtG(a.saveExamId(o._id))}),t._uU(1,"Start Exam"),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.MGl("routerLink","/audit/exams/",e._id,"")}}function Ut(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t.YNc(12,vt,2,1,"span",14),t.YNc(13,Zt,2,1,"span",15),t.YNc(14,At,2,1,"span",16),t.YNc(15,Tt,2,1,"span",17),t.YNc(16,qt,3,2,"a",18),t.YNc(17,yt,2,1,"a",19),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.exam_name),t.xp6(2),t.Oqu(e.course_name),t.xp6(2),t.Oqu(t.Dn7(7,10,null==e?null:e.exam_date_from,"dd-MM-YYYY","UTC")),t.xp6(3),t.Oqu(t.Dn7(10,14,null==e?null:e.exam_date_to,"dd-MM-YYYY","UTC")),t.xp6(3),t.Q6J("ngIf","Upcoming"==e.exam_status),t.xp6(1),t.Q6J("ngIf","Exam Over"==e.exam_status),t.xp6(1),t.Q6J("ngIf","Ongoing"==e.exam_status),t.xp6(1),t.Q6J("ngIf","Submitted"==e.exam_status),t.xp6(1),t.Q6J("ngIf",null==e?null:e.reportStatus),t.xp6(1),t.Q6J("ngIf","Ongoing"==e.exam_status)}}let Ct=(()=>{class n{constructor(e){this.api=e,this.env=A.N}ngOnInit(){this.getStudentsExamsList()}saveExamId(e){sessionStorage.setItem("examId",e)}getStudentsExamsList(){const i=JSON.parse(localStorage.getItem("user")).id;this.api.get(`auditExam/getStudentExams/${i}`,{}).subscribe(o=>{console.log(o),o?(this.examList=o.exams,this.updatedExamList=this.examList.map(a=>{let r=new Date(a.exam_date_from);r.setHours(0,0,0),a.exam_time?.split(":"),a.exam_time?.split(":"),r.getDate(),r.getMonth(),r.getFullYear();let f=new Date;console.log("exam_date_to",a.exam_date_to);let v=new Date(a.exam_date_to),x=this.timeDifference(f,r),T=this.timeDifference(f,v);return console.log("examEndTimediffBwNowAndExam>>>>Start<<<",x),console.log("examEndTimediffBwNowAndExam>>>>End<<<",T),x>0&&T>0?(console.log("Exam is upcoming"),a.exam_status="Upcoming"):x<=0&&T>0?(console.log("Exam is ongoing"),a.exam_status="Ongoing",this.getExamSubmittedStatus(a)):x<0&&T<0&&(console.log("Exam is over"),this.getExamSubmittedStatus(a),console.log("getExamSubmittedStatus>>",a.exam_status),"Ongoing"!==a.exam_status&&(a.exam_status="Exam Over")),a})):alert(o.message)})}getExamSubmittedStatus(e){const o=JSON.parse(localStorage.getItem("user")).id;return this.api.post("auditExam/getExamSubmittedStatus",{userId:o,examId:e._id}).subscribe(r=>{if(console.log("getExamSubmittedStatus",r),1==r.message&&(e.exam_status="Submitted"),e.report=!!r.data?.reportPath&&r.data?.reportPath,e.reportStatus=!!r?.data?.reportStatus&&r.data?.reportStatus,e.parent_exam){const l={userId:o,examId:e.parent_exam};console.log("CHILD EXAM >>>>>",e),this.api.post("auditExam/getExamSubmittedStatus",l).subscribe(d=>{console.log("getExamSubmittedStatus of PARENT EXAM",d),1==d.message&&d.data.reportPath&&(e.exam_status="Ongoing"),1==d.message&&!d.data.reportPath&&(e.exam_status="Upcoming"),0==d.message&&(e.exam_status="Upcoming")})}}),console.log("returning item ",e),e}timeDifference(e,i){let o=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours()-5,i.getUTCMinutes()-30,i.getUTCSeconds(),i.getUTCMilliseconds())-o}timeInSeconds(e){let i=e.getTime();return console.log("from single function",i),i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-exam-list"]],decls:27,vars:1,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","h-100"],[1,"card-body"],[1,"card-title","col"],[1,"table-responsive"],[1,"table","align-items-center","table-flush","text-center"],[1,"thead-light"],["scope","col"],[4,"ngFor","ngForOf"],["class","badge badge-pill badge-warning",4,"ngIf"],["class","badge badge-pill badge-danger",4,"ngIf"],["class","badge badge-pill badge-primary",4,"ngIf"],["class","badge badge-pill badge-success",4,"ngIf"],["class","btn btn-sm mx-4",3,"href",4,"ngIf"],["class","mx-3 btn btn-sm btn-outline-info",3,"routerLink","click",4,"ngIf"],[1,"badge","badge-pill","badge-warning"],[1,"badge","badge-pill","badge-danger"],[1,"badge","badge-pill","badge-primary"],[1,"badge","badge-pill","badge-success"],[1,"btn","btn-sm","mx-4",3,"href"],[1,"fas","fa-file-download"],[1,"mx-3","btn","btn-sm","btn-outline-info",3,"routerLink","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",4)(9,"h4",8),t._uU(10,"Audit Exam List"),t.qZA()(),t.TgZ(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),t._uU(16,"Exam Name"),t.qZA(),t.TgZ(17,"th",12),t._uU(18,"Course Name"),t.qZA(),t.TgZ(19,"th",12),t._uU(20,"Exam Start Date"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"Exam Start Date"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Actions"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,Ut,18,18,"tr",13),t.qZA()()()()()()()()),2&e&&(t.xp6(26),t.Q6J("ngForOf",i.examList))},dependencies:[c.sg,c.O5,m.yS,c.uU]}),n})();var St=_(7556);function wt(n,s){if(1&n&&(t.TgZ(0,"div",5)(1,"div",1)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h1",9),t._uU(6),t._UZ(7,"br"),t._uU(8),t._UZ(9,"br"),t.qZA()()()()()()),2&n){const e=t.oxw();t.xp6(6),t.hij(" Exam Name: ",null==e.exam?null:e.exam.exam_name,""),t.xp6(2),t.hij(" Exam Code: ",null==e.exam?null:e.exam.exam_code,"")}}function It(n,s){1&n&&(t.TgZ(0,"small",34),t._uU(1,"Evidence uploaded successfully "),t.qZA())}function Qt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",13)(4,"span",20),t._uU(5),t.qZA(),t._UZ(6,"div",21),t.qZA(),t.TgZ(7,"div",22)(8,"div",23)(9,"label",24),t._uU(10,"Answer"),t.TgZ(11,"span",25),t._uU(12,"*"),t.qZA()(),t.TgZ(13,"select",26),t.NdJ("change",function(o){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.setUserAnswer(o,r))}),t.TgZ(14,"option",27),t._uU(15,"Choose Your Answer"),t.qZA(),t.TgZ(16,"option",28),t._uU(17,"Yes"),t.qZA(),t.TgZ(18,"option",29),t._uU(19,"No"),t.qZA(),t.TgZ(20,"option",30),t._uU(21,"Not Applicable"),t.qZA()()()(),t.TgZ(22,"div",22)(23,"div",23)(24,"label",24),t._uU(25,"Attach Evidence"),t.qZA(),t.TgZ(26,"input",31),t.NdJ("change",function(o){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.setUserEvidence(o,r))}),t.qZA()(),t.YNc(27,It,2,0,"small",32),t.qZA()(),t.TgZ(28,"div",19),t._UZ(29,"div",13),t.TgZ(30,"div",13)(31,"label"),t._uU(32,"Description"),t.qZA(),t.TgZ(33,"textarea",33),t.NdJ("change",function(o){const r=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.setUserDescription(o,r))}),t.qZA()()()()()}if(2&n){const e=s.$implicit,i=s.index;t.xp6(5),t.hij("",i+1,"."),t.xp6(1),t.Q6J("innerHTML",e.question,t.oJD),t.xp6(7),t.MGl("name","userAnswer",i,""),t.xp6(13),t.MGl("name","userEvidence",i,""),t.xp6(1),t.Q6J("ngIf",e.userEvidence),t.xp6(6),t.MGl("name","userDescription",i,"")}}function Et(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"div")(2,"div",11)(3,"div",12)(4,"div",13)(5,"b"),t._uU(6,"Questions"),t.qZA()(),t.TgZ(7,"div",13)(8,"b"),t._uU(9,"Reply"),t.qZA()()()(),t.TgZ(10,"div",14),t.YNc(11,Qt,34,6,"div",15),t.TgZ(12,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.examSubmit())}),t._uU(13," Submit "),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(11),t.Q6J("ngForOf",e.questionList)}}function Lt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.goBack())}),t._UZ(1,"i",48),t._uU(2," Go Back "),t.qZA()}}function Nt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"div",39)(5,"div",40),t._uU(6," Are you sure you want to submit Assessment? "),t.qZA(),t.TgZ(7,"div",14)(8,"ul",41)(9,"li",42),t._uU(10,"Assessment Name: "),t.TgZ(11,"b"),t._uU(12),t.qZA()(),t.TgZ(13,"li",42),t._uU(14,"Assessment Code: "),t.TgZ(15,"b"),t._uU(16),t.qZA()()(),t._UZ(17,"hr"),t.TgZ(18,"div",19)(19,"div",43),t.YNc(20,Lt,3,0,"button",44),t.qZA(),t.TgZ(21,"div",45)(22,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.backToHome())}),t._uU(23," Submit Assessment "),t.qZA()()()()()()()()()}if(2&n){const e=t.oxw();t.xp6(12),t.Oqu(null==e.exam?null:e.exam.exam_name),t.xp6(4),t.Oqu(null==e.exam?null:e.exam.exam_code),t.xp6(4),t.Q6J("ngIf",e.goBackButton)}}function Dt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"div",5),t._UZ(2,"div",1),t.qZA(),t.TgZ(3,"div",50)(4,"div",37)(5,"div",38)(6,"div",39)(7,"div",51)(8,"h1",52),t._uU(9," Your Assessment Has Been Successfully Submitted!!"),t._UZ(10,"br"),t.qZA(),t._UZ(11,"br"),t.qZA(),t.TgZ(12,"div",14)(13,"div",19)(14,"div",43)(15,"button",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goBackToHome())}),t._UZ(16,"i",48),t._uU(17," Go Back To Home "),t.qZA()()()()()()()()()}}function L(n,s,e,i,o,a,r){try{var l=n[a](r),d=l.value}catch(p){return void e(p)}l.done?s(d):Promise.resolve(d).then(i,o)}function N(n){return function(){var s=this,e=arguments;return new Promise(function(i,o){var a=n.apply(s,e);function r(d){L(a,i,o,r,l,"next",d)}function l(d){L(a,i,o,r,l,"throw",d)}r(void 0)})}}function Ft(n,s){if(1&n&&(t.TgZ(0,"a",24),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.auditType,"")}}function Yt(n,s){if(1&n&&(t.TgZ(0,"a",25),t._uU(1," Evaluate Assessment "),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.hYB("routerLink","/audit/individual-answerSheet/",e._id,"/",i.examId,"")}}function Mt(n,s){1&n&&(t.TgZ(0,"span",26),t._uU(1," Assessment Evaluated "),t.qZA())}function Ot(n,s){if(1&n&&(t.TgZ(0,"a",27),t._UZ(1,"i",28),t._uU(2," Assessment Report "),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.hYB("href","",i.env.url,"/file/download/",null==e?null:e.report,"",t.LSH)}}const kt=function(n,s){return{"text-success":n,"text-danger":s,"font-weight-bold":!0}};function Bt(n,s){if(1&n&&(t.TgZ(0,"tr",14)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,Ft,2,1,"a",19),t.qZA(),t.TgZ(7,"td",20),t._uU(8),t.qZA(),t.TgZ(9,"td",14),t.YNc(10,Yt,2,2,"a",21),t.YNc(11,Mt,2,0,"span",22),t.YNc(12,Ot,3,2,"a",23),t.qZA()()),2&n){const e=s.$implicit,i=s.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.full_name),t.xp6(2),t.Q6J("ngIf",e.auditType),t.xp6(1),t.Q6J("ngClass",t.WLB(8,kt,e.auditSubmit,!e.auditSubmit)),t.xp6(1),t.hij(" ",e.auditSubmit?"Submitted":"Not Submitted Yet",""),t.xp6(2),t.Q6J("ngIf",e.auditSubmit&&"created"!=e.reportStatus),t.xp6(1),t.Q6J("ngIf","created"==e.reportStatus),t.xp6(1),t.Q6J("ngIf",null==e?null:e.reportStatus)}}function Gt(n,s){if(1&n&&(t.TgZ(0,"a",25),t._UZ(1,"i",26),t._uU(2," View"),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.hYB("href","",i.env.url,"/file/download/",e.userEvidence,"",t.LSH)}}function jt(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,"Not Attached"),t.qZA())}function Pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",27)(2,"h4"),t._uU(3,"Suggestion "),t.TgZ(4,"span",28),t._uU(5,"*"),t.qZA()(),t._UZ(6,"br"),t.TgZ(7,"ckeditor",29),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit;return t.KtG(a.adminSuggestion=o)}),t.qZA()(),t.TgZ(8,"div",30)(9,"div",31)(10,"label",19)(11,"h4"),t._uU(12,"Risk "),t.TgZ(13,"span",28),t._uU(14,"*"),t.qZA()()(),t.TgZ(15,"select",32),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.setAdminRisk(o,a))}),t.TgZ(16,"option",21),t._uU(17,"Select"),t.qZA(),t.TgZ(18,"option",33),t._uU(19,"Low"),t.qZA(),t.TgZ(20,"option",34),t._uU(21,"Medium"),t.qZA(),t.TgZ(22,"option",35),t._uU(23,"High"),t.qZA()()()()()}if(2&n){const e=t.oxw(),i=e.index,o=e.$implicit;t.xp6(7),t.MGl("name","adminSuggestion",i,""),t.Q6J("ngModel",o.adminSuggestion),t.xp6(8),t.MGl("name","adminRisk",i,"")}}function $t(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",7)(2,"div",4)(3,"div",5),t._UZ(4,"span",15),t.qZA(),t.TgZ(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA(),t.TgZ(9,"div",5),t.YNc(10,Gt,3,2,"a",16),t.YNc(11,jt,2,0,"span",17),t.qZA(),t.TgZ(12,"div",5)(13,"div",18),t.NdJ("change",function(o){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.getAnswerResult(o,r))}),t._UZ(14,"label",19),t.TgZ(15,"select",20)(16,"option",21),t._uU(17,"Select"),t.qZA(),t.TgZ(18,"option",22),t._uU(19,"Accept"),t.qZA(),t.TgZ(20,"option",23),t._uU(21,"Reject"),t.qZA()()()()(),t.YNc(22,Pt,24,3,"div",24),t.qZA()()}if(2&n){const e=s.$implicit,i=s.index;t.xp6(4),t.Q6J("innerHTML",e.question,t.oJD),t.xp6(2),t.hij(" ",e.userAnswer," "),t.xp6(2),t.hij(" ",e.userDescription," "),t.xp6(2),t.Q6J("ngIf",e.userEvidence),t.xp6(1),t.Q6J("ngIf",!e.userEvidence),t.xp6(2),t.MGl("name","adminStatus",i,""),t.xp6(9),t.Q6J("ngIf",e.isAdminSuggestion)}}const Rt=[{path:"questoin-category",component:Y},{path:"audit-question-add",component:j},{path:"audit-question-list",component:K},{path:"audit-queryDetail/:id",component:Q},{path:"audit-questionnare",component:Q},{path:"individual-query-list/:id",component:E},{path:"audit-query-list",component:E},{path:"audit-query-view/:id",component:dt},{path:"exam-schedule",component:mt},{path:"exam-list",component:bt},{path:"exams/:id",component:(()=>{class n{constructor(e,i,o,a,r,l,d){this.api=e,this.router=i,this.route=o,this.authService=a,this.fs=r,this.el=l,this.renderer=d,this.intervals=[],this.userSubmit=!1,this.goBackButton=!0,this.submitFinalExam=!1,this.env=A.N,this.route.params.subscribe(p=>{let g=JSON.parse(localStorage.getItem("user"));if(!g)return alert("Please Login to perform this exam!!"),void this.router.navigate(["/login"]);if(this.api.getById("user",g.id).subscribe(f=>{f&&(this.userId=f._id,this.user_name=f.full_name,this.user_image=f.profile_photo)}),this.examId=p.id,this.examId){const v={userId:g.id,examId:this.examId};console.log(v),this.api.post("auditExam/getExamSubmittedStatus",v).subscribe(x=>{console.log(x),1==x.message?(alert("Your Exam has been submitted already "),this.router.navigate(["/dashboard"])):this.getExam()})}})}ngOnInit(){}ngOnDestroy(){window.onbeforeunload=null;for(const e of this.intervals)clearInterval(e)}calculateRemainingTime(){const e=new Date,i=this.endTime.getTime()-e.getTime(),o=new Date(this.endTime.getTime()-e.getTime()),a=String(o.getUTCHours()).padStart(2,"0"),r=String(o.getUTCMinutes()).padStart(2,"0"),l=String(o.getUTCSeconds()).padStart(2,"0");if(this.remainingTime=`${a}:${r}:${l}`,console.log("this.remainingTime>>>>>>>",this.remainingTime),i<=0){JSON.parse(localStorage.getItem("user"));for(const g of this.intervals)clearInterval(g)}}startTimer(){const e=setInterval(()=>{if(this.timer>0)this.timer--;else{for(const i of this.intervals)clearInterval(i);this.userSubmit=!0,this.goBackButton=!1}},1e3);this.intervals.push(e),setTimeout(()=>{},1e3)}getExam(){this.api.getById("auditExam",this.examId).subscribe(e=>{this.exam=e,console.log("this.examName",this.exam),this.examName=e.exam_name;const i=new Date;console.log("EXAMM___NOW---TTIME>>>",i);const o=i.getMinutes()+parseInt(e.exam_duration);this.endTime=new Date(o),console.log("EXAMM___---TTIME>>>",i),this.endTime.setHours(this.endTime.getHours()-5),this.endTime.setMinutes(this.endTime.getMinutes()-30),this.intervals.push(setInterval(()=>{this.calculateRemainingTime()},1e3)),Date.now(),new Date(e.exam_date);let d=new Date;this.end_time=new Date(o),console.log("EXAM END TIME++++@+@+@+",this.end_time),this.dif=this.end_time.getTime()-d.getTime();var g=Math.abs(this.dif/1e3);this.timer=g,console.log("======>>>>",this.dif),this.course_type=e.course_type,this.course_name=e.course_name,this.batch_name=e.batch_name,this.getQuestions()})}getQuestions(){const e=JSON.parse(localStorage.getItem("user")),o={course_type:this.course_type,course_name:this.course_name,user_id:e.id,exam_id:this.examId};console.log("QUESTION QUERY >>",o),this.api.get("auditExam/getQuestions",o).subscribe(a=>{this.questionList=a.data,console.log("Questions to display>>>>>>>",a),"New questions"==a.message&&console.log(".saveQuestionsInitiallySTOOPED"),this.questionCount=this.questionList.length,this.currentQuestion=this.questionList[0],this.notViewed=this.questionCount})}setUserEvidence(e,i){this.file=e.target.files.length?e.target.files[0]:null,this.file?this.fs.uploadFile(this.file).subscribe(o=>{o.type==w.dt.Response&&(i.userEvidence=o.body.file.path)}):alert("Select File to upload")}setUserAnswer(e,i){console.log("setUserAnswer item",i),console.log("evtsetUserAnswer",i.userAnswer),i.userAnswer=e.target.selectedOptions[0].value,i.status="answered",i.seen=!0}setUserDescription(e,i){console.log("evt",e.target.value),i.adminSuggestion=e.target.value}examSubmit(e){console.log("fromr>>>>",e),console.log("examSubmit>>>>",this.questionList),this.api.post("auditExam/syncAnswer",{answerSheet:this.questionList,examId:this.examId,userId:this.userId}).subscribe(o=>{o.success&&(this.userSubmit=!0)})}submit(){this.userSubmit=!0}goBack(){this.userSubmit=!1}logout(){this.authService.logout()}backToHome(){const i={mobile:JSON.parse(localStorage.getItem("user")).mobile};this.api.get("exam/finalExamSubmit",i).subscribe(o=>{o&&(console.log("Exam Final submit"),this.userSubmit=!1,this.submitFinalExam=!0)})}goBackToHome(){this.router.navigate(["/dashboard"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.F0),t.Y36(m.gz),t.Y36(St.e),t.Y36(Z.I),t.Y36(t.SBq),t.Y36(t.Qsj))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-audit-exam"]],decls:5,vars:4,consts:[["class","header bg-gradient-danger pb-8 pt-3",4,"ngIf"],[1,"container-fluid"],["class","card mt-7",4,"ngIf"],["class","submit",4,"ngIf"],["class","",4,"ngIf"],[1,"header","bg-gradient-danger","pb-8","pt-3"],[1,"header-body"],[1,"row","px-4"],[1,"col-8"],[2,"color","white"],[1,"card","mt-7"],[1,"card-header"],[1,"row","text-center"],[1,"col-6"],[1,"card-body"],["class","card mb-4",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success",3,"click"],[1,"card","mb-4"],[1,"card-body","my-3"],[1,"row"],[1,"font-weight-bold"],["id","question",1,"font-weight-bold",3,"innerHTML"],[1,"col-3","text-center"],[1,"form-group"],["for",""],[1,"badge","text-red",2,"font-size","medium"],["id","",1,"form-control",3,"name","change"],["value","","selected","","disabled",""],["value","Yes"],["value","No"],["value","NA"],["type","file","id","",1,"form-control",3,"name","change"],["class","text-success",4,"ngIf"],[1,"form-control",3,"name","change"],[1,"text-success"],[1,"submit"],[1,"container-fluid","mt-7","pb-5"],[1,"row","justify-content-center"],[1,"col-lg-12","col-md-8"],[1,"card","bg-secondary","shadow","border-0"],[1,"card-header","bg-dark","text-white","py-4"],[1,"list-group","mb-2","text-center"],[1,"list-group-item"],[1,"col","text-left"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-4","text-right"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-angle-left"],[1,""],[1,"container","mt--5","pb-5"],[1,"card-header","bg-transparent"],[1,"text-red"],[1,"btn","btn-secondary",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,wt,10,2,"div",0),t.TgZ(1,"div",1),t.YNc(2,Et,14,1,"div",2),t.YNc(3,Nt,24,3,"div",3),t.YNc(4,Dt,18,0,"div",4),t.qZA()),2&e&&(t.Q6J("ngIf",!i.userSubmit&&!i.submitFinalExam),t.xp6(2),t.Q6J("ngIf",!i.userSubmit&&!i.submitFinalExam),t.xp6(1),t.Q6J("ngIf",i.userSubmit),t.xp6(1),t.Q6J("ngIf",i.submitFinalExam))},dependencies:[c.sg,c.O5,u.YN,u.Kr],styles:["p[_ngcontent-%COMP%] {\n  font-size: medium;\n  font-weight: bold;\n}"]}),n})()},{path:"student-exam-list",component:Ct},{path:"student-list/:batchId/:examId",component:(()=>{class n{constructor(e,i,o,a){var r=this;this.api=e,this.route=i,this.router=o,this.fs=a,this.env=A.N,this.route.params.subscribe(l=>{this.batchId=l.batchId,this.examId=l.examId,this.api.get("user",{batch:this.batchId,limit:500}).subscribe(function(){var d=N(function*(p){if(p){for(const g of p.data)r.userId=g._id,r.getExamSubmitStatus(g);console.log("User in batch ",p.data),r.userList=p.data}});return function(p){return d.apply(this,arguments)}}()),this.api.getById("auditExam",this.examId).subscribe(d=>{d&&(this.examDetails=d,console.log("exam details in batch ",d))}),this.api.getById("batch",this.batchId).subscribe(d=>{d&&(this.BatchList=d,console.log("exam details in batch ",d))})})}ngOnInit(){}getExamSubmitStatus(e){const i={userId:this.userId,examId:this.examId};return console.log(i),this.api.post("auditExam/getExamSubmittedStatus",i).toPromise().then(o=>(console.log(o),o.message?(e.auditSubmit=!0,e.report=!!o.data?.reportPath&&o.data?.reportPath,e.reportStatus=!!o?.data?.reportStatus&&o.data?.reportStatus):(e.auditSubmit=!1,e.report=!!o.data?.reportPath&&o.data?.reportPath,e.reportStatus=!!o?.data?.reportStatus&&o.data?.reportStatus),e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.gz),t.Y36(m.F0),t.Y36(Z.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-list"]],decls:31,vars:2,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","h-100"],[1,"card-body"],[1,""],[1,"card-title"],[1,"row","my-4"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],[1,"text-center"],["scope","col"],["scope","col-4"],["class","text-center",4,"ngFor","ngForOf"],[1,"col-3"],["class","badge badge-pill badge-success",4,"ngIf"],[3,"ngClass"],["class","btn btn-warning btn-sm",3,"routerLink",4,"ngIf"],["class","text-success",4,"ngIf"],["class","btn btn-sm mx-4","target","_blank",3,"href",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"text-success"],["target","_blank",1,"btn","btn-sm","mx-4",3,"href"],[1,"fas","fa-file-download"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1",9),t._uU(10,"Risk Assessment List "),t.qZA(),t.TgZ(11,"div",10)(12,"div",5)(13,"h2",8),t._uU(14),t.qZA()()(),t.TgZ(15,"div",4)(16,"div",11)(17,"table",12)(18,"thead",13)(19,"tr",14),t._UZ(20,"th",15),t.TgZ(21,"th",15),t._uU(22,"Name"),t.qZA(),t.TgZ(23,"th",15),t._uU(24," Assessment Type"),t.qZA(),t.TgZ(25,"th",15),t._uU(26,"Assessment Status"),t.qZA(),t.TgZ(27,"th",16),t._uU(28,"Actions"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,Bt,13,11,"tr",17),t.qZA()()()()()()()()()()),2&e&&(t.xp6(14),t.hij("Batch name : ",null==i.BatchList?null:i.BatchList.batch_name,""),t.xp6(16),t.Q6J("ngForOf",i.userList))},dependencies:[c.mk,c.sg,c.O5,m.yS]}),n})()},{path:"individual-answerSheet/:id/:examId",component:(()=>{class n{constructor(e,i,o,a){this.api=e,this.route=i,this.router=o,this.fs=a,this.env=A.N}ngOnInit(){var e=this;this.route.params.subscribe(i=>{this.studentId=i.id,this.examId=i.examId,this.api.getById("user",this.studentId).subscribe(function(){var a=N(function*(r){r&&(e.studentDetails=r,e.studentBatch=r.batch)});return function(r){return a.apply(this,arguments)}}()),this.api.get("auditExam/getAnswerSheet",{user_id:this.studentId,exam_id:this.examId}).subscribe(a=>{a&&(this.answerSheet=a.data,this.answerSheet.forEach(r=>r.isAdminSuggestion=!1),console.log("exam details in batch ",a))})})}getAnswerResult(e,i){i.adminStatus=e.target.selectedOptions[0].value,"Reject"==i.adminStatus&&(i.isAdminSuggestion=!0)}setUserDescription(e,i){console.log("evt",e.target),i.adminSuggestion=e.target.value}setAdminRisk(e,i){console.log("evt",e.target),i.adminRisk=e.target.value}onSubmit(){console.log("Submit",this.answerSheet),confirm("Are you sure you want to submit the assessment ?")&&this.api.post("auditExam/syncAdminSuggestion",{answerSheet:this.answerSheet,examId:this.examId,studentId:this.studentId}).subscribe(i=>{i.success&&(alert("Assessment save successfully and Assessment report generated "),this.router.navigate(["/audit/student-list",this.studentBatch,this.examId]))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.G),t.Y36(m.gz),t.Y36(m.F0),t.Y36(Z.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-individual-answer-sheet"]],decls:36,vars:2,consts:[[1,"header","bg-gradient-danger","pb-8","pt-5","pt-md-8"],[1,"container-fluid"],[1,"header-body"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col"],[1,"card","h-100"],[1,"card-body"],[1,""],[1,"card-title"],[1,"row","my-4"],[1,"card"],["class","card my-3",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"card","my-3"],[3,"innerHTML"],["class","btn btn-primary","target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],[1,"form-group",3,"name","change"],["for",""],["name","","id","",1,"form-control"],["disabled","","selected",""],["value","Accept"],["value","Reject"],["class","row",4,"ngIf"],["target","_blank",1,"btn","btn-primary",3,"href"],["aria-hidden","true",1,"fa","fa-eye"],[1,"col-9"],[1,"text-danger"],[3,"name","ngModel","ngModelChange"],[1,"col-3"],[1,"form-group"],["id","",1,"form-control",3,"name","change"],["value","Low",1,"text-success"],["value","Medium",1,"text-warning"],["value","High",1,"text-danger"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"div",2),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1",9),t._uU(10,"Risk Assessment Audit Sheet "),t.qZA(),t.TgZ(11,"div",10)(12,"div",5)(13,"h2"),t._uU(14),t.qZA()()(),t.TgZ(15,"div",11)(16,"div",7)(17,"div",4)(18,"div",5)(19,"h3"),t._uU(20,"Question"),t.qZA()(),t.TgZ(21,"div",5)(22,"h3"),t._uU(23,"Answer"),t.qZA()(),t.TgZ(24,"div",5)(25,"h3"),t._uU(26,"Description"),t.qZA()(),t.TgZ(27,"div",5)(28,"h3"),t._uU(29,"Attached Evidence"),t.qZA()(),t.TgZ(30,"div",5)(31,"h3"),t._uU(32,"Action"),t.qZA()()()()(),t.YNc(33,$t,23,7,"div",12),t.TgZ(34,"div",13),t.NdJ("click",function(){return i.onSubmit()}),t._uU(35,"Submit"),t.qZA()()()()()()()),2&e&&(t.xp6(14),t.hij("Name: ",null==i.studentDetails?null:i.studentDetails.full_name,""),t.xp6(19),t.Q6J("ngForOf",i.answerSheet))},dependencies:[c.sg,c.O5,y.u,u.YN,u.Kr,u.JJ,u.On]}),n})()}];let Kt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(Rt),m.Bz]}),n})(),Xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,Kt,y.d,u.u5,U.IJ,u.UX,b.JX]}),n})()}}]);